# Project2 硬件说明书

## 项目概述
本项目是一个基于Arduino的温湿度监测系统，结合超声波传感器、舵机、LED和蜂鸣器，根据温度和湿度数据实现不同的报警和响应机制。

## 硬件组件清单

| 组件 | 数量 | 说明 |
|------|------|------|
| ISD开发板（内置MCU） | 1 | 主控板 |
| 温湿度传感器 (DHT11) | 1 | 检测温度和湿度 |
| 超声波传感器 (HC-SR04) | 1 | 距离检测传感器 |
| 蜂鸣器 | 1 | 板载蜂鸣器 |
| LED | 1 | 板载LED（LED1） |
| 舵机 (SG90) | 1 | 机械控制 |
| 杜邦线 | 若干 | 连接组件 |

## 引脚连接说明

### 温湿度传感器 (DHT11)
| 传感器引脚 | 开发板引脚 | 说明 |
|-----------|------------|------|
| VCC | 5V | 电源正极 |
| GND | GND | 电源负极 |
| DATA | D4 | 数据信号 |

### 超声波传感器 (HC-SR04)
| 传感器引脚 | 开发板引脚 | 说明 |
|-----------|------------|------|
| VCC | 5V | 电源正极 |
| GND | GND | 电源负极 |
| TRIG | D5 | 触发信号输出 |
| ECHO | D6 | 回波信号输入 |

### 蜂鸣器（板载）
| 蜂鸣器引脚 | 开发板引脚 | 说明 |
|-----------|------------|------|
| 信号 | D35 | 控制信号（板载） |
| 负极 | GND | 接地（板载） |

### LED（板载LED1）
| LED引脚 | 开发板引脚 | 说明 |
|---------|------------|------|
| 信号 | D1 | 控制信号（板载LED1） |
| 负极 | GND | 接地（板载） |

### 舵机 (SG90)
| 舵机引脚 | 开发板引脚 | 说明 |
|---------|------------|------|
| VCC | 5V | 电源正极 |
| GND | GND | 电源负极 |
| PWM | D7 | 控制信号 |

## 接线图

```
ISD 開發板
│
├─ 5V  ────────────────────────────┐
│                                   │
├─ GND ─────────────────────────────┼────────────────────────────────────┐
│                                   │                                    │
├─ D4  ─────────────────────────────┤       ┌──────────┐                │
│                                   │       │ DHT11    │                │
├─ D5  ─────────────────────────────┤       └──────────┘                │
│                                   │                                    │
├─ D6  ─────────────────────────────┼───────┐                            │
│                                   │       │                            │
├─ D7  ─────────────────────────────┼───┐   │                            │
│                                   │   │   │                            │
├─ D35 ─────────────────────────────┼───┼───┼────────────────────────┐   │
│                                   │   │   │                        │   │
├─ D1  ─────────────────────────────┼───┼───┼────────────────────────┼───┤
│                                   │   │   │                        │   │
│                               ┌───┴─┐ │ │ │                    ┌───┴─┐ │
│                               │Buzz │ │ │ │                    │Servo│ │
│                               └─────┘ │ │ │                    └─────┘ │
│                                       │ │ │                        │
│                                       │ │ │                    ┌───┴───┘
│                                   ┌───┴─┘ │
│                                   │LED1   │
│                                   └───────┘
│
└─────────────────────────────────────────────────────────────────────────
                                            │
                                       ┌────┴────┐
                                       │ HC-SR04 │
                                       └─────────┘
```

## 详细接线步骤

### 步骤1：连接温湿度传感器 (DHT11)
1. 将DHT11的VCC引脚连接到开发板的5V引脚
2. 将DHT11的GND引脚连接到开发板的GND引脚
3. 将DHT11的DATA引脚连接到开发板的D4数字引脚

### 步骤2：连接超声波传感器 (HC-SR04)
1. 将HC-SR04的VCC引脚连接到开发板的5V引脚
2. 将HC-SR04的GND引脚连接到开发板的GND引脚
3. 将HC-SR04的TRIG引脚连接到开发板的D5数字引脚
4. 将HC-SR04的ECHO引脚连接到开发板的D6数字引脚

### 步骤3：连接舵机 (SG90)
1. 将舵机的VCC引脚连接到开发板的5V引脚
2. 将舵机的GND引脚连接到开发板的GND引脚
3. 将舵机的PWM（橙色）引脚连接到开发板的D7数字引脚

### 步骤4：确认板载组件
- 蜂鸣器为板载组件，已连接至D35引脚，无需额外接线
- LED（LED1）为板载组件，已连接至D1引脚，无需额外接线

## 工作原理

### 温湿度传感器 (DHT11)
- 测量范围：温度 0-50°C，湿度 20-90% RH
- 测量精度：温度 ±2°C，湿度 ±5% RH
- 响应时间：小于1秒

### 超声波传感器 (HC-SR04)
- HC-SR04通过发射超声波脉冲并测量回波时间来计算距离
- 测量范围：2cm - 400cm
- 精度：可达3mm
- 有效角度：<15°

### 舵机 (SG90)
- 舵机用于机械控制，可旋转0-180度
- 本项目中：0度表示停止，90度表示运行
- 工作电压：4.8V - 6V

### 系统控制逻辑

**条件1：温度 ≤ 30°C（安全状态）**
- LED熄灭
- 蜂鸣器静音
- 舵机停止（0度）
- 串口显示：Safe: Temperature <= 30°C

**条件2：温度 > 30°C 且 湿度 ≥ 30%（警告状态）**
- LED点亮
- 蜂鸣器连续报警（1000Hz）
- 舵机停止（0度）
- 串口显示：Caution: Humidity >= 30%
- 额外显示超声波测量的距离

**条件3：温度 > 30°C 且 湿度 < 30%（危险状态）**
- LED点亮
- 蜂鸣器间歇报警（2000Hz，100ms间隔）
- 舵机运行（90度）
- 串口显示：Dangerous: Humidity < 30%

## 代码上传步骤

1. 安装Arduino IDE（如果尚未安装）
2. 从项目文件夹打开`Project2.ino`文件
3. 确保已安装所需库：
   - `DHT` 库：温湿度传感器
   - `NewPing` 库：超声波传感器
   - `ESP32Servo` 库：舵机控制
   - 在Arduino IDE中：Sketch → Include Library → Manage Libraries
   - 搜索并安装上述库
4. 连接开发板到电脑
5. 选择正确的开发板类型
6. 选择正确的端口：Tools → Port → 选择开发板连接的端口
7. 点击上传按钮（→）上传代码

## 测试与调试

### 测试步骤
1. 上传代码后，打开串口监视器（Tools → Serial Monitor）
2. 设置波特率为9600
3. 使用手或热源改变温度
4. 使用湿毛巾或喷雾改变湿度
5. 在超声波传感器前放置物体测试距离检测
6. 观察LED状态、蜂鸣器声音和舵机动作

### 常见问题排查

| 问题 | 可能原因 | 解决方法 |
|------|---------|---------|
| DHT11无读数 | 接线错误或传感器损坏 | 检查VCC、GND、DATA连接 |
| 温湿度读数为NaN | 读取失败 | 检查传感器连接和电源 |
| 舵机不动作 | 引脚连接错误 | 检查D7引脚配置 |
| 舵机抖动 | 电源不足 | 确保供电稳定 |
| 蜂鸣器不响 | 引脚连接错误 | 检查代码中D35引脚配置 |
| LED不亮 | 引脚连接错误 | 检查代码中D1引脚配置 |
| LED_PIN未定义错误 | 代码错误 | 检查代码第40行是否应使用LED而非LED_PIN |
| 串口无数据 | 波特率不匹配 | 设置为9600 |
| 距离读数为0 | 传感器未对准 | 确保传感器垂直朝向目标物 |

## 安全注意事项

1. **电压安全**：确保所有组件使用5V电压，避免过压损坏
2. **接线顺序**：先断电再接线，接好线后再上电
3. **极性注意**：LED、DHT11和舵机有极性，注意正负极
4. **舵机保护**：避免舵机负载过大，防止烧坏
5. **传感器保护**：避免温湿度传感器受到强烈撞击或水滴直接接触
6. **电源稳定**：舵机运行时电流较大，确保供电稳定

## 扩展功能建议

1. **OLED显示屏**：实时显示温湿度数值和系统状态
2. **RGB LED**：使用不同颜色指示不同状态（绿=安全，黄=警告，红=危险）
3. **WiFi模块**：实现远程监控和数据上传
4. **温湿度阈值调整**：添加电位器调整报警阈值
5. **自动风扇控制**：当温度过高时自动启动风扇
6. **数据记录**：添加SD卡模块记录历史数据
7. **手机APP**：开发手机APP实现远程监控

## 技术参数

| 参数 | 数值 |
|------|------|
| 工作电压 | 5V DC |
| 温度测量范围 | 0°C - 50°C |
| 温度测量精度 | ±2°C |
| 湿度测量范围 | 20% - 90% RH |
| 湿度测量精度 | ±5% RH |
| 距离测量范围 | 2cm - 400cm |
| 距离测量精度 | ±3mm |
| 舵机角度范围 | 0° - 180° |
| 串口波特率 | 9600 |
| 采样间隔 | 2秒 |

## 维护与保养

1. 定期检查接线是否松动
2. 保持传感器表面清洁，避免灰尘积累
3. 避免在潮湿或高温环境中长期使用
4. 舵机长期不用时，应断开电源
5. 定期校准温湿度传感器
6. 存放于干燥通风处

## 联系与支持

如有问题，请检查：
- Arduino官方文档：https://www.arduino.cc/reference/en/
- DHT库文档：https://github.com/adafruit/DHT-sensor-library
- NewPing库文档：https://bitbucket.org/teckel12/arduino-new-ping/wiki/Home
- ESP32Servo库文档：https://github.com/madhephaestus/ESP32Servo

---

**版本信息**：V1.0
**最后更新**：2026年1月15日
