# Project1 硬件说明书

## 项目概述
本项目是一个基于Arduino的超声波距离检测系统，能够根据检测到的距离控制板载LED和板载蜂鸣器，并播放不同音调的《Jingle Bells》旋律。

## 硬件组件清单

| 组件 | 数量 | 说明 |
|------|------|------|
| ISD开发板（内置MCU） | 1 | 主控板 |
| 超声波传感器 (HC-SR04) | 1 | 距离检测传感器 |
| 蜂鸣器 | 1 | 板载蜂鸣器 |
| LED | 1 | 板载LED（LED1） |
| 杜邦线 | 若干 | 连接组件 |

## 引脚连接说明

### 超声波传感器 (HC-SR04)
| 传感器引脚 | 开发板引脚 | 说明 |
|-----------|------------|------|
| VCC | 5V | 电源正极 |
| GND | GND | 电源负极 |
| TRIG | D5 | 触发信号输出 |
| ECHO | D6 | 回波信号输入 |

### 蜂鸣器（板载）
| 蜂鸣器引脚 | 开发板引脚 | 说明 |
|-----------|------------|------|
| 信号 | D35 | 控制信号（板载） |
| 负极 | GND | 接地（板载） |

### LED（板载LED1）
| LED引脚 | 开发板引脚 | 说明 |
|---------|------------|------|
| 信号 | D1 | 控制信号（板载LED1） |
| 负极 | GND | 接地（板载） |

## 接线图

```
ISD 開發板
│
├─ 5V  ────────────────────────────────────┐
│                                          │
├─ GND ─────────────────────────────────────┼─────────────┐
│                                          │             │
├─ D5  ─────────────────────────────────────┤             │
│                                          │             │
├─ D6  ─────────────────────────────────────┼───────┐     │
│                                          │       │     │
├─ D35 ─────────────────────────────────────┼───┐   │     │
│                                          │   │   │     │
├─ D1  ─────────────────────────────────────┼───┼───┼─────┤
│                                          │   │   │     │
│                                      ┌───┴─┐ │   │     │
│                                      │Buzz │ │   │     │
│                                      └─────┘ │   │     │
│                                              │   │     │
│                                              │   │     │
│                                              │   │     │
│                                          ┌───┴───┘     │
│                                          │ LED1        │
│                                          └─────────────┘
│
└──────────────────────────────────────────────────────────
                                   │
                              ┌────┴────┐
                              │ HC-SR04 │
                              └─────────┘
```

## 详细接线步骤

### 步骤1：连接超声波传感器
1. 将HC-SR04的VCC引脚连接到开发板的5V引脚
2. 将HC-SR04的GND引脚连接到开发板的GND引脚
3. 将HC-SR04的TRIG引脚连接到开发板的D5数字引脚
4. 将HC-SR04的ECHO引脚连接到开发板的D6数字引脚

### 步骤2：确认板载蜂鸣器
蜂鸣器为板载组件，已连接至D35引脚，无需额外接线。

### 步骤3：确认板载LED
LED（LED1）为板载组件，已连接至D1引脚，无需额外接线。

## 工作原理

### 超声波传感器
- HC-SR04通过发射超声波脉冲并测量回波时间来计算距离
- 测量范围：2cm - 400cm
- 精度：可达3mm
- 有效角度：<15°

### 距离检测逻辑
- **距离 > 10cm**：LED常亮，蜂鸣器静音（安全距离）
- **5cm ≤ 距离 ≤ 10cm**：LED关闭，蜂鸣器播放高音《Jingle Bells》（警告）
- **距离 < 5cm**：LED关闭，蜂鸣器播放低音《Jingle Bells》（危险）

### 蜂鸣器音乐播放
- 使用tone()函数产生不同频率的音调
- 通过pitches.h头文件定义音符频率
- 循环播放旋律数组中的音符

## 代码上传步骤

1. 安装Arduino IDE（如果尚未安装）
2. 从项目文件夹打开`Project1.ino`文件
3. 确保已安装`NewPing`库：
   - 在Arduino IDE中：Sketch → Include Library → Manage Libraries
   - 搜索"NewPing"并安装
4. 连接开发板到电脑
5. 选择正确的开发板类型
6. 选择正确的端口：Tools → Port → 选择开发板连接的端口
7. 点击上传按钮（→）上传代码

## 测试与调试

### 测试步骤
1. 上传代码后，打开串口监视器（Tools → Serial Monitor）
2. 设置波特率为9600
3. 将手或其他物体放置在传感器前方
4. 观察LED状态和蜂鸣器声音变化

### 常见问题排查

| 问题 | 可能原因 | 解决方法 |
|------|---------|---------|
| 传感器无读数 | 接线错误 | 检查VCC、GND、TRIG、ECHO连接 |
| 距离读数为0 | 传感器未对准 | 确保传感器垂直朝向目标物 |
| 蜂鸣器不响 | 引脚连接错误 | 检查代码中D35引脚配置 |
| LED不亮 | 引脚连接错误 | 检查代码中D1引脚配置 |
| 串口无数据 | 波特率不匹配 | 设置为9600 |
| 编译错误 | LED_PIN未定义 | 检查代码第77行是否应使用LED而非LED_PIN |

## 安全注意事项

1. **电压安全**：确保所有组件使用5V电压，避免过压损坏
2. **接线顺序**：先断电再接线，接好线后再上电
3. **极性注意**：LED和蜂鸣器有极性，注意正负极
4. **电阻使用**：若使用外部LED，必须串联限流电阻（220Ω），本项目中使用板载LED已内置电阻
5. **传感器保护**：避免超声波传感器受到强烈撞击

## 扩展功能建议

1. **OLED显示屏**：实时显示距离数值
2. **温湿度传感器**：结合环境数据提供更全面信息
3. **RGB LED**：使用不同颜色指示不同距离范围
4. **WiFi模块**：实现远程监控和数据上传
5. **报警阈值调整**：添加电位器调整报警距离

## 技术参数

| 参数 | 数值 |
|------|------|
| 工作电压 | 5V DC |
| 测量距离 | 2cm - 400cm |
| 测量精度 | ±3mm |
| 工作温度 | -20°C ~ +70°C |
| 串口波特率 | 9600 |

## 维护与保养

1. 定期检查接线是否松动
2. 保持传感器表面清洁
3. 避免在潮湿或高温环境中使用
4. 长期不用时断开电源
5. 存放于干燥通风处

## 联系与支持

如有问题，请检查：
- Arduino官方文档：https://www.arduino.cc/reference/en/
- NewPing库文档：https://bitbucket.org/teckel12/arduino-new-ping/wiki/Home

---

**版本信息**：V1.1
**最后更新**：2026年1月15日
